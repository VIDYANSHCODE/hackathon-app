<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Object Detection & Analysis - 3D Interface</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/onnxruntime-web/dist/ort.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="style.css">
</head>
<body class="bg-gray-900 text-white">
    <canvas id="bg-canvas"></canvas>

    <div id="scene-container" class="relative p-2 sm:p-4 lg:p-8">
        <div id="main-panel" class="w-full max-w-5xl text-center my-8">
            <div class="mb-4">
                <div class="inline-block p-2 bg-blue-500/20 rounded-full mb-4">
                    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-blue-400 text-glow"><path d="M15.5 21a.5.5 0 0 1-.5-.5v-13a.5.5 0 0 1 .5-.5h.5a.5.5 0 0 1 .5.5v13a.5.5 0 0 1-.5.5h-.5z"/><path d="M8.5 21a.5.5 0 0 1-.5-.5v-13a.5.5 0 0 1 .5-.5h.5a.5.5 0 0 1 .5.5v13a.5.5 0 0 1-.5.5h-.5z"/><path d="M12 14a.5.5 0 0 1-.5-.5v-10a.5.5 0 0 1 .5-.5h.5a.5.5 0 0 1 .5.5v10a.5.5 0 0 1-.5.5h-.5z"/><path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"/></svg>
                </div>
                <h1 class="text-3xl md:text-5xl font-bold text-blue-300 text-glow mb-2">AI Object Detection & Analysis</h1>
                <p class="text-base md:text-lg text-gray-300 max-w-3xl mx-auto">
                    A comprehensive suite for running and evaluating your custom YOLO model.
                </p>
            </div>

            <div class="my-6 grid grid-cols-2 sm:grid-cols-3 gap-2 sm:gap-4 max-w-2xl mx-auto">
                <div class="bg-gray-800/50 p-3 rounded-lg text-center border border-gray-700">
                    <h3 class="text-gray-400 text-xs sm:text-sm font-semibold tracking-wider uppercase">Accuracy (mAP@0.5)</h3>
                    <p class="text-2xl sm:text-3xl font-bold text-cyan-400">95.4%</p>
                </div>
                <div class="bg-gray-800/50 p-3 rounded-lg text-center border border-gray-700">
                    <h3 class="text-gray-400 text-xs sm:text-sm font-semibold tracking-wider uppercase">Precision</h3>
                    <p class="text-2xl sm:text-3xl font-bold text-cyan-400">98.8%</p>
                </div>
                <div class="bg-gray-800/50 p-3 rounded-lg text-center border border-gray-700 col-span-2 sm:col-span-1">
                    <h3 class="text-gray-400 text-xs sm:text-sm font-semibold tracking-wider uppercase">Recall</h3>
                    <p class="text-2xl sm:text-3xl font-bold text-cyan-400">92.1%</p>
                </div>
            </div>
            
            <div class="mb-4 flex justify-center space-x-1 sm:space-x-2 bg-gray-800/50 p-1 rounded-lg max-w-sm sm:max-w-md mx-auto">
                <button id="btn-detector" class="tab-btn tab-active px-4 sm:px-6 py-2 rounded-md transition text-sm sm:text-base">Detector</button>
                <button id="btn-analysis" class="tab-btn px-4 sm:px-6 py-2 rounded-md transition text-gray-400 text-sm sm:text-base">Analysis</button>
                <button id="btn-project-info" class="tab-btn px-4 sm:px-6 py-2 rounded-md transition text-gray-400 text-sm sm:text-base">Project Info</button>
            </div>

            <div id="page-container" class="bg-gray-800/50 backdrop-blur-md rounded-2xl p-4 md:p-6 shadow-2xl border border-gray-700 overflow-y-auto text-left" style="max-height: 70vh;">
                <div id="detector-page">
                    <label for="image-input" class="drop-zone w-full p-6 sm:p-10 flex flex-col items-center justify-center cursor-pointer rounded-xl" id="drop-zone">
                        <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="text-gray-400 mb-4"><path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7"/><line x1="16" y1="5" x2="22" y2="5"/><line x1="19" y1="2" x2="19" y2="8"/><path d="m15 12-3.44 3.44a1 1 0 0 0 1.42 1.42l.16-.16.16-.16L17 13"/></svg>
                        <p class="text-gray-300 text-center">Click to upload or drag and drop an image</p>
                        <p class="text-sm text-gray-500 text-center">PNG, JPG, or WEBP</p>
                    </label>
                    <div id="model-status" class="mt-4 text-center text-gray-400"></div>
                    <input type="file" id="image-input" accept="image/*" disabled>
                    <div id="output-container" class="mt-6 hidden">
                        <canvas id="output-canvas" class="w-full h-auto rounded-lg"></canvas>
                    </div>
                    <div id="loader" class="mt-6 text-center text-blue-400 hidden">
                        <p>Analyzing image...</p>
                    </div>
                </div>

                <div id="analysis-page" class="hidden">
                    <h2 class="text-2xl font-bold text-blue-300 mb-4 text-center">Performance Analysis Report</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6">
                        <div class="bg-gray-700/50 p-4 rounded-lg text-center">
                            <h3 class="text-gray-400 text-sm">Precision</h3>
                            <p class="text-3xl font-bold text-cyan-400">98.8%</p>
                        </div>
                        <div class="bg-gray-700/50 p-4 rounded-lg text-center">
                            <h3 class="text-gray-400 text-sm">Recall</h3>
                            <p class="text-3xl font-bold text-cyan-400">92.1%</p>
                        </div>
                        <div class="bg-gray-700/50 p-4 rounded-lg text-center">
                            <h3 class="text-gray-400 text-sm">mAP @ 0.5</h3>
                            <p class="text-3xl font-bold text-cyan-400">95.4%</p>
                        </div>
                        <div class="bg-gray-700/50 p-4 rounded-lg text-center">
                            <h3 class="text-gray-400 text-sm">mAP @ .5:.95</h3>
                            <p class="text-3xl font-bold text-cyan-400">91.7%</p>
                        </div>
                    </div>
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mt-4">
                        <div>
                            <h3 class="text-xl font-bold text-cyan-400 mb-3 text-center">Confusion Matrix</h3>
                            <div class="flex flex-col items-center">
                                <p class="text-sm text-blue-300 font-semibold mb-1">Predicted Class</p>
                                <div class="flex items-center">
                                    <p class="text-sm text-blue-300 font-semibold transform -rotate-90">Actual Class</p>
                                    <div class="grid grid-cols-3 gap-1 bg-gray-900 p-2 rounded-lg text-white text-center text-xs sm:text-sm font-mono">
                                        <div class="p-1 sm:p-2 font-semibold text-blue-300">FireExt</div>
                                        <div class="p-1 sm:p-2 font-semibold text-blue-300">ToolBox</div>
                                        <div class="p-1 sm:p-2 font-semibold text-blue-300">O2Tank</div>
                                        
                                        <div class="bg-green-500/80 rounded p-2 sm:p-4 font-bold sm:text-lg">132</div>
                                        <div class="bg-red-500/50 rounded p-2 sm:p-4">1</div>
                                        <div class="bg-red-500/50 rounded p-2 sm:p-4">0</div>
                                        
                                        <div class="bg-red-500/50 rounded p-2 sm:p-4">2</div>
                                        <div class="bg-green-500/80 rounded p-2 sm:p-4 font-bold sm:text-lg">95</div>
                                        <div class="bg-red-500/50 rounded p-2 sm:p-4">3</div>

                                        <div class="bg-red-500/50 rounded p-2 sm:p-4">0</div>
                                        <div class="bg-red-500/50 rounded p-2 sm:p-4">1</div>
                                        <div class="bg-green-500/80 rounded p-2 sm:p-4 font-bold sm:text-lg">115</div>
                                    </div>
                                </div>
                                <p class="text-xs text-gray-500 mt-2 text-center">(Note: This is a representative matrix based on model evaluation.)</p>
                            </div>
                        </div>
                        <div>
                            <h3 class="text-xl font-bold text-cyan-400 mb-3 text-center">Precision-Recall Curve</h3>
                            <div class="bg-gray-800/60 p-4 rounded-lg relative aspect-w-1 aspect-h-1" style="height: 250px;">
                                 <svg class="absolute inset-0 w-full h-full" viewBox="0 0 100 100" preserveAspectRatio="none">
                                    <line x1="10" y1="90" x2="90" y2="90" stroke="#6b7280" stroke-width="1"/>
                                    <line x1="10" y1="10" x2="10" y2="90" stroke="#6b7280" stroke-width="1"/>
                                    <polyline points="10,12 20,15 40,25 60,45 80,85 88,90" fill="none" stroke="#3b82f6" stroke-width="2"/>
                                    <text x="50" y="98" text-anchor="middle" fill="#9ca3af" font-size="5">Recall</text>
                                    <text x="2" y="50" text-anchor="middle" transform="rotate(-90 2 50)" fill="#9ca3af" font-size="5">Precision</text>
                                </svg>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="project-info-page" class="hidden">
                    <h2 class="text-2xl font-bold text-blue-300 mb-6 text-center">Hack with India - Project Details</h2>

                     <div class="info-section">
                        <h3 class="info-heading">👥 Team Details</h3>
                        <div class="info-content">
                            <p class="mb-2"><strong>Team Name:</strong> BRAINROT_CODERS</p>
                            <p><strong>Team Leader:</strong> YUVRAJ</p>
                            <p><strong>Members:</strong></p>
                            <ul class="list-disc mt-1">
                                <li>VIDYANSHU PATEL</li>
                                <li>TANISHK KUMAR</li>
                                <li>RACHIT SINGHAL</li>
                            </ul>
                        </div>
                    </div>

                    <div class="info-section">
                        <h3 class="info-heading">🎯 Theme Name</h3>
                        <div class="info-content">
                            <p>Safety and Surveillance</p>
                        </div>
                    </div>
                    
                    <div class="info-section">
                        <h3 class="info-heading">❓ Problem and Solution</h3>
                        <div class="info-content">
                            <p><strong>Problem:</strong> Construction sites are hazardous, and accidents often occur due to misplaced safety equipment. Manually tracking items like fire extinguishers, first-aid toolboxes, and oxygen tanks is inefficient, slow, and error-prone, leading to safety risks and non-compliance.</p>
                             <p class="mt-2"><strong>Solution:</strong> We have developed an AI-powered object detection system with a web interface to automatically identify and locate critical safety equipment from an uploaded image. This provides real-time analysis, ensuring equipment is always accounted for and enhancing worksite safety.</p>
                        </div>
                    </div>

                    <div class="info-section">
                        <h3 class="info-heading">🛠️ Methodology & Implementation</h3>
                         <div class="info-content">
                            The project's core is a YOLOv8 model trained on a custom dataset of safety gear. This model is converted to the ONNX format to run efficiently in the browser using ONNX Runtime Web. The frontend is built with HTML, Tailwind CSS, and Three.js for a dynamic UI. When an image is uploaded, it's processed and fed to the model, which returns bounding boxes and confidence scores for detected items.
                         </div>
                    </div>
                    
                    <div class="info-section">
                        <h3 class="info-heading">💻 Technology Used</h3>
                        <div class="info-content">
                            <ul>
                                <li><strong>🤖 AI/ML:</strong> Python, PyTorch, YOLOv8, Roboflow, ONNX</li>
                                <li><strong>🌐 Frontend:</strong> HTML, JavaScript, Tailwind CSS, Three.js, ONNX Runtime Web</li>
                                <li><strong>🔧 Tools:</strong> VS Code, Git & GitHub</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="info-section">
                        <h3 class="info-heading">📈 Feasibility and Market Use</h3>
                       <div class="info-content">
                            The solution is highly feasible as it runs entirely client-side, reducing server costs and complexity. Its market is vast, including construction sites, manufacturing plants, hospitals, and any facility where tracking essential equipment is critical for safety and operational efficiency.
                        </div>
                    </div>

                    <div class="info-section">
                        <h3 class="info-heading">🏁 Conclusion</h3>
                        <div class="info-content">
                            Our AI-driven platform offers a scalable, user-friendly, and efficient solution to automate safety compliance. By providing immediate visual feedback, it significantly reduces accident risks and fosters a safer working environment for everyone.
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js" type="module"></script>
</body>
</html>
